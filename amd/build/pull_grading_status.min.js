define(["jquery","core/ajax","core/modal_factory","core/modal_events","core/str"],function(a,b,c,d,e){function f(){b.call([{methodname:"qtype_programmingtask_retrieve_grading_results",args:{qubaid:i},done:function(a){a&&g()},fail:function(a){console.log(a)}}])}function g(){if(!j){j=!0;var a=[{key:"reloadpage",component:"qtype_programmingtask"},{key:"gradeprocessfinished",component:"qtype_programmingtask"},{key:"reload",component:"qtype_programmingtask"}];e.get_strings(a).then(function(a){c.create({type:c.types.SAVE_CANCEL,title:a[0],body:a[1]}).done(function(b){b.setSaveButtonText(a[2]),b.getRoot().on(d.save,function(){location.reload(!0),j=!1}),b.getRoot().on(d.hidden,function(){j=!1}),b.show()})})}}var h,i,j=!1;return{init:function(a,b){i=a,"undefined"==typeof h&&(h=setInterval(f,b))}}});