define ("qtype_moopt/creation_via_drag_and_drop",["core/ajax","qtype_moopt/edit_editor_content"],function(a,b){return{init:function init(){var a=this;document.querySelector("#loadproformataskfilebutton").addEventListener("click",function(){a.extractInformation()})},extractInformation:function extractInformation(){var c=document.querySelector("#id_proformataskfileupload").parentNode,d=null;c.childNodes.forEach(function(a){if("proformataskfileupload"==a.name&&null===d){d=a.value}});a.call([{methodname:"qtype_moopt_extract_task_infos_from_draft_file",args:{itemid:d},done:function done(a){if("undefined"!=typeof a.error){document.querySelector("#id_error_ajaxerrorlabel").parentNode.children.item(0).innerHTML="<div>"+a.error+"</div>";document.querySelector("#id_error_ajaxwarnlabel").parentNode.children.item(0).innerHTML="";return}document.querySelector("#id_error_ajaxerrorlabel").parentNode.children.item(0).innerHTML="";document.querySelector("#id_name").value=a.title;b.setContents("id_questiontext",a.description);b.setContents("id_internaldescription",a.internaldescription);b.setContentsOfText("id_taskuuid",a.taskuuid);b.setContentsOfText("id_defaultmark",a.maxscoregradinghints);b.setContents("id_generalfeedback",a.filesdisplayedingeneralfeedback);var c=document.querySelector("#id_enablefilesubmissions");c.checked=!a.enablefileinput;c.click();var d=a.freetextfilesettings.length;c=document.querySelector("#id_enablefreetextsubmissions");c.checked=!(0<d);c.click();if(0<d){c=document.querySelector("#id_ftsnuminitialfields");c.value=d;c.click();c=document.querySelector("#id_ftsmaxnumfields");c.value=d;c.click();c=document.querySelector("#id_enablecustomsettingsforfreetextinputfields");c.checked=!1;c.click();for(var e=0;e<a.freetextfilesettings.length;e++){c=document.querySelector("#id_enablecustomsettingsforfreetextinputfield"+e);c.checked=!a.freetextfilesettings[e].enablecustomsettings;c.click();if(!0==a.freetextfilesettings[e].usefixedfilename){c=document.querySelector("#id_namesettingsforfreetextinput"+e+"_0");c.checked=!1;c.click()}else{c=document.querySelector("#id_namesettingsforfreetextinput"+e+"_1");c.checked=!1;c.click()}document.querySelector("#id_freetextinputfieldname"+e).value=a.freetextfilesettings[e].defaultfilename;document.querySelector("#id_freetextinputfieldtemplate"+e).value=a.freetextfilesettings[e].filecontent;document.querySelector("#id_ftsoverwrittenlang"+e).value=a.freetextfilesettings[e].proglang}}var f="";if("undefined"!=typeof a.moodleValidationProformaNamespace){f+="<p>Detected ProFormA-version "+a.moodleValidationProformaNamespace+"</p>"}if("undefined"!=typeof a.moodleValidationWarningInvalidNamespace){f+="<p>"+a.moodleValidationWarningInvalidNamespace+"</p>"}if("undefined"!=typeof a.moodleValidationWarnings){f+="<p>Found the following problems during validation but still continued:</p><ul>";a.moodleValidationWarnings.forEach(function(a){f+="<li>"+a.msg+"</li>"});f+="</ul>"}document.querySelector("#id_error_ajaxwarninglabel").parentNode.children.item(0).innerHTML=f;document.querySelector("#id_name").focus()},fail:function fail(a){console.log(a);document.querySelector("#id_error_ajaxerrorlabel").parentNode.children.item(0).innerHTML="<div>"+a.debuginfo+"</div><div> For more information see browser console.</div>";document.querySelector("#id_error_ajaxwarninglabel").parentNode.children.item(0).innerHTML=""}}])}}});
//# sourceMappingURL=creation_via_drag_and_drop.min.js.map
