define ("qtype_moopt/creation_via_drag_and_drop",["jquery","core/ajax","qtype_moopt/edit_editor_content"],function(a,b,c){return{init:function init(){var b=this;a("#loadproformataskfilebutton").click(function(){b.extractInformation()})},extractInformation:function extractInformation(){var d=a("#id_proformataskfileupload").parent(),e=d.find("[name='proformataskfileupload']")[0].value;d.find;b.call([{methodname:"qtype_moopt_extract_task_infos_from_draft_file",args:{itemid:e},done:function done(b){if("undefined"!=typeof b.error){a("#id_error_ajaxerrorlabel").parent().children().first().html("<div>"+b.error+"</div>");a("#id_error_ajaxwarninglabel").parent().children().first().html("");return}a("#id_error_ajaxerrorlabel").parent().children().first().html("");a("#id_name").val(b.title);c.setContents("id_questiontext",b.description);c.setContents("id_internaldescription",b.internaldescription);c.setContentsOfText("id_taskuuid",b.taskuuid);c.setContentsOfText("id_defaultmark",b.maxscoregradinghints);c.setContents("id_generalfeedback",b.filesdisplayedingeneralfeedback);a("#id_enablefilesubmissions").prop("checked",!b.enablefileinput).click();var d=b.freetextfilesettings.length;a("#id_enablefreetextsubmissions").prop("checked",!(0<d)).click();if(0<d){a("#id_ftsnuminitialfields").val(d).click();a("#id_ftsmaxnumfields").val(d).click();a("#id_enablecustomsettingsforfreetextinputfields").prop("checked",!1).click();for(var e=0;e<b.freetextfilesettings.length;e++){a("#id_enablecustomsettingsforfreetextinputfield"+e).prop("checked",!(1==b.freetextfilesettings[e].enablecustomsettings)).click();if(!0==b.freetextfilesettings[e].usefixedfilename){a("#id_namesettingsforfreetextinput"+e+"_0").prop("checked",!1).click()}else{a("#id_namesettingsforfreetextinput"+e+"_1").prop("checked",!1).click()}a("#id_freetextinputfieldname"+e).val(b.freetextfilesettings[e].defaultfilename);a("#id_freetextinputfieldtemplate"+e).val(b.freetextfilesettings[e].filecontent);a("#id_ftsoverwrittenlang"+e).val(b.freetextfilesettings[e].proglang)}}var f="";if("undefined"!=typeof b.moodleValidationProformaNamespace){f+="<p>Detected ProFormA-version "+b.moodleValidationProformaNamespace+"</p>"}if("undefined"!=typeof b.moodleValidationWarningInvalidNamespace){f+="<p>"+b.moodleValidationWarningInvalidNamespace+"</p>"}if("undefined"!=typeof b.moodleValidationWarnings){f+="<p>Found the following problems during validation but still continued:</p><ul>";b.moodleValidationWarnings.forEach(function(a){f+="<li>"+a.msg+"</li>"});f+="</ul>"}a("#id_error_ajaxwarninglabel").parent().children().first().html(f);a("#id_name").focus()},fail:function fail(b){console.log(b);a("#id_error_ajaxerrorlabel").parent().children().first().html("<div>"+b.debuginfo+"</div><div> For more information see browser console.</div>");a("#id_error_ajaxwarninglabel").parent().children().first().html("")}}])}}});
//# sourceMappingURL=creation_via_drag_and_drop.min.js.map
